"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setComponentTemplate = setComponentTemplate;
exports.getComponentTemplate = getComponentTemplate;

var _env = require("@glimmer/env");

var _util = require("@glimmer/util");

const TEMPLATES = new WeakMap();
const getPrototypeOf = Object.getPrototypeOf;

function setComponentTemplate(factory, obj) {
  if (_env.DEBUG && !(obj !== null && (typeof obj === 'object' || typeof obj === 'function'))) {
    throw new Error(`Cannot call \`setComponentTemplate\` on \`${(0, _util.debugToString)(obj)}\``);
  }

  if (_env.DEBUG && TEMPLATES.has(obj)) {
    throw new Error(`Cannot call \`setComponentTemplate\` multiple times on the same class (\`${(0, _util.debugToString)(obj)}\`)`);
  }

  TEMPLATES.set(obj, factory);
  return obj;
}

function getComponentTemplate(obj) {
  let pointer = obj;

  while (pointer !== null) {
    let template = TEMPLATES.get(pointer);

    if (template !== undefined) {
      return template;
    }

    pointer = getPrototypeOf(pointer);
  }

  return undefined;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL21hbmFnZXIvbGliL3B1YmxpYy90ZW1wbGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOztBQUNBOztBQUdBLE1BQU0sU0FBUyxHQUFxQyxJQUFwRCxPQUFvRCxFQUFwRDtBQUVBLE1BQU0sY0FBYyxHQUFHLE1BQU0sQ0FBN0IsY0FBQTs7QUFFTSxTQUFBLG9CQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsRUFBb0U7QUFDeEUsTUFBSSxjQUFTLEVBQUUsR0FBRyxLQUFILElBQUEsS0FBaUIsT0FBQSxHQUFBLEtBQUEsUUFBQSxJQUEyQixPQUFBLEdBQUEsS0FBM0QsVUFBZSxDQUFGLENBQWIsRUFBd0Y7QUFDdEYsVUFBTSxJQUFBLEtBQUEsQ0FBVSw2Q0FBNkMseUJBQWMsR0FBZCxDQUE3RCxJQUFNLENBQU47QUFDRDs7QUFFRCxNQUFJLGNBQVMsU0FBUyxDQUFULEdBQUEsQ0FBYixHQUFhLENBQWIsRUFBaUM7QUFDL0IsVUFBTSxJQUFBLEtBQUEsQ0FDSiw0RUFBNEUseUJBQWMsR0FBZCxDQUQ5RSxLQUFNLENBQU47QUFLRDs7QUFFRCxFQUFBLFNBQVMsQ0FBVCxHQUFBLENBQUEsR0FBQSxFQUFBLE9BQUE7QUFFQSxTQUFBLEdBQUE7QUFDRDs7QUFFSyxTQUFBLG9CQUFBLENBQUEsR0FBQSxFQUEwQztBQUM5QyxNQUFJLE9BQU8sR0FBWCxHQUFBOztBQUVBLFNBQU8sT0FBTyxLQUFkLElBQUEsRUFBeUI7QUFDdkIsUUFBSSxRQUFRLEdBQUcsU0FBUyxDQUFULEdBQUEsQ0FBZixPQUFlLENBQWY7O0FBRUEsUUFBSSxRQUFRLEtBQVosU0FBQSxFQUE0QjtBQUMxQixhQUFBLFFBQUE7QUFDRDs7QUFFRCxJQUFBLE9BQU8sR0FBRyxjQUFjLENBQXhCLE9BQXdCLENBQXhCO0FBQ0Q7O0FBRUQsU0FBQSxTQUFBO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBERUJVRyB9IGZyb20gJ0BnbGltbWVyL2Vudic7XG5pbXBvcnQgeyBkZWJ1Z1RvU3RyaW5nIH0gZnJvbSAnQGdsaW1tZXIvdXRpbCc7XG5pbXBvcnQgeyBUZW1wbGF0ZUZhY3RvcnkgfSBmcm9tICdAZ2xpbW1lci9pbnRlcmZhY2VzJztcblxuY29uc3QgVEVNUExBVEVTOiBXZWFrTWFwPG9iamVjdCwgVGVtcGxhdGVGYWN0b3J5PiA9IG5ldyBXZWFrTWFwKCk7XG5cbmNvbnN0IGdldFByb3RvdHlwZU9mID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29tcG9uZW50VGVtcGxhdGUoZmFjdG9yeTogVGVtcGxhdGVGYWN0b3J5LCBvYmo6IG9iamVjdCkge1xuICBpZiAoREVCVUcgJiYgIShvYmogIT09IG51bGwgJiYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnIHx8IHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNhbGwgXFxgc2V0Q29tcG9uZW50VGVtcGxhdGVcXGAgb24gXFxgJHtkZWJ1Z1RvU3RyaW5nIShvYmopfVxcYGApO1xuICB9XG5cbiAgaWYgKERFQlVHICYmIFRFTVBMQVRFUy5oYXMob2JqKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDYW5ub3QgY2FsbCBcXGBzZXRDb21wb25lbnRUZW1wbGF0ZVxcYCBtdWx0aXBsZSB0aW1lcyBvbiB0aGUgc2FtZSBjbGFzcyAoXFxgJHtkZWJ1Z1RvU3RyaW5nIShcbiAgICAgICAgb2JqXG4gICAgICApfVxcYClgXG4gICAgKTtcbiAgfVxuXG4gIFRFTVBMQVRFUy5zZXQob2JqLCBmYWN0b3J5KTtcblxuICByZXR1cm4gb2JqO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tcG9uZW50VGVtcGxhdGUob2JqOiBvYmplY3QpOiBUZW1wbGF0ZUZhY3RvcnkgfCB1bmRlZmluZWQge1xuICBsZXQgcG9pbnRlciA9IG9iajtcblxuICB3aGlsZSAocG9pbnRlciAhPT0gbnVsbCkge1xuICAgIGxldCB0ZW1wbGF0ZSA9IFRFTVBMQVRFUy5nZXQocG9pbnRlcik7XG5cbiAgICBpZiAodGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRlbXBsYXRlO1xuICAgIH1cblxuICAgIHBvaW50ZXIgPSBnZXRQcm90b3R5cGVPZihwb2ludGVyKTtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9