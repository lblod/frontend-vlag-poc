export var Storage = /*#__PURE__*/function () {
  function Storage() {
    this.array = [];
    this.next = 0;
  }

  var _proto = Storage.prototype;

  _proto.add = function add(element) {
    var slot = this.next,
        array = this.array;

    if (slot === array.length) {
      this.next++;
    } else {
      var prev = array[slot];
      this.next = prev;
    }

    this.array[slot] = element;
    return slot;
  };

  _proto.deref = function deref(pointer) {
    return this.array[pointer];
  };

  _proto.drop = function drop(pointer) {
    this.array[pointer] = this.next;
    this.next = pointer;
  };

  return Storage;
}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL2xvdy1sZXZlbC9saWIvZ2x1ZS9zdG9yYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQU0sT0FBTjtBQUFBLHFCQUFBO0FBQ21CLFNBQUEsS0FBQSxHQUFBLEVBQUE7QUFDVCxTQUFBLElBQUEsR0FBQSxDQUFBO0FBd0JUOztBQTFCRDs7QUFBQSxTQUlFLEdBSkYsR0FJRSxhQUFHLE9BQUgsRUFBb0I7QUFBQSxRQUNkLElBRGMsR0FDbEIsSUFEa0IsQ0FDWixJQURZO0FBQUEsUUFDQSxLQURBLEdBQ2xCLElBRGtCLENBQ0EsS0FEQTs7QUFHbEIsUUFBSSxJQUFJLEtBQUssS0FBSyxDQUFsQixNQUFBLEVBQTJCO0FBQ3pCLFdBQUEsSUFBQTtBQURGLEtBQUEsTUFFTztBQUNMLFVBQUksSUFBSSxHQUFHLEtBQUssQ0FBaEIsSUFBZ0IsQ0FBaEI7QUFDQSxXQUFBLElBQUEsR0FBQSxJQUFBO0FBQ0Q7O0FBRUQsU0FBQSxLQUFBLENBQUEsSUFBQSxJQUFBLE9BQUE7QUFDQSxXQUFBLElBQUE7QUFDRCxHQWhCSDs7QUFBQSxTQWtCRSxLQWxCRixHQWtCRSxlQUFLLE9BQUwsRUFBcUI7QUFDbkIsV0FBTyxLQUFBLEtBQUEsQ0FBUCxPQUFPLENBQVA7QUFDRCxHQXBCSDs7QUFBQSxTQXNCRSxJQXRCRixHQXNCRSxjQUFJLE9BQUosRUFBb0I7QUFDbEIsU0FBQSxLQUFBLENBQUEsT0FBQSxJQUFzQixLQUF0QixJQUFBO0FBQ0EsU0FBQSxJQUFBLEdBQUEsT0FBQTtBQUNELEdBekJIOztBQUFBO0FBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgU3RvcmFnZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgYXJyYXk6IHVua25vd25bXSA9IFtdO1xuICBwcml2YXRlIG5leHQgPSAwO1xuXG4gIGFkZChlbGVtZW50OiB1bmtub3duKTogbnVtYmVyIHtcbiAgICBsZXQgeyBuZXh0OiBzbG90LCBhcnJheSB9ID0gdGhpcztcblxuICAgIGlmIChzbG90ID09PSBhcnJheS5sZW5ndGgpIHtcbiAgICAgIHRoaXMubmV4dCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcHJldiA9IGFycmF5W3Nsb3RdIGFzIG51bWJlcjtcbiAgICAgIHRoaXMubmV4dCA9IHByZXY7XG4gICAgfVxuXG4gICAgdGhpcy5hcnJheVtzbG90XSA9IGVsZW1lbnQ7XG4gICAgcmV0dXJuIHNsb3Q7XG4gIH1cblxuICBkZXJlZihwb2ludGVyOiBudW1iZXIpOiB1bmtub3duIHtcbiAgICByZXR1cm4gdGhpcy5hcnJheVtwb2ludGVyXTtcbiAgfVxuXG4gIGRyb3AocG9pbnRlcjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5hcnJheVtwb2ludGVyXSA9IHRoaXMubmV4dDtcbiAgICB0aGlzLm5leHQgPSBwb2ludGVyO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9