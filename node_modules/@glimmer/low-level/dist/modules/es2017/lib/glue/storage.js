export class Storage {
  constructor() {
    this.array = [];
    this.next = 0;
  }

  add(element) {
    let {
      next: slot,
      array
    } = this;

    if (slot === array.length) {
      this.next++;
    } else {
      let prev = array[slot];
      this.next = prev;
    }

    this.array[slot] = element;
    return slot;
  }

  deref(pointer) {
    return this.array[pointer];
  }

  drop(pointer) {
    this.array[pointer] = this.next;
    this.next = pointer;
  }

}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL2xvdy1sZXZlbC9saWIvZ2x1ZS9zdG9yYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU0sTUFBTyxPQUFQLENBQWM7QUFBcEIsRUFBQSxXQUFBLEdBQUE7QUFDbUIsU0FBQSxLQUFBLEdBQW1CLEVBQW5CO0FBQ1QsU0FBQSxJQUFBLEdBQU8sQ0FBUDtBQXdCVDs7QUF0QkMsRUFBQSxHQUFHLENBQUMsT0FBRCxFQUFpQjtBQUNsQixRQUFJO0FBQUUsTUFBQSxJQUFJLEVBQUUsSUFBUjtBQUFjLE1BQUE7QUFBZCxRQUF3QixJQUE1Qjs7QUFFQSxRQUFJLElBQUksS0FBSyxLQUFLLENBQUMsTUFBbkIsRUFBMkI7QUFDekIsV0FBSyxJQUFMO0FBQ0QsS0FGRCxNQUVPO0FBQ0wsVUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUQsQ0FBaEI7QUFDQSxXQUFLLElBQUwsR0FBWSxJQUFaO0FBQ0Q7O0FBRUQsU0FBSyxLQUFMLENBQVcsSUFBWCxJQUFtQixPQUFuQjtBQUNBLFdBQU8sSUFBUDtBQUNEOztBQUVELEVBQUEsS0FBSyxDQUFDLE9BQUQsRUFBZ0I7QUFDbkIsV0FBTyxLQUFLLEtBQUwsQ0FBVyxPQUFYLENBQVA7QUFDRDs7QUFFRCxFQUFBLElBQUksQ0FBQyxPQUFELEVBQWdCO0FBQ2xCLFNBQUssS0FBTCxDQUFXLE9BQVgsSUFBc0IsS0FBSyxJQUEzQjtBQUNBLFNBQUssSUFBTCxHQUFZLE9BQVo7QUFDRDs7QUF6QmlCIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFN0b3JhZ2Uge1xuICBwcml2YXRlIHJlYWRvbmx5IGFycmF5OiB1bmtub3duW10gPSBbXTtcbiAgcHJpdmF0ZSBuZXh0ID0gMDtcblxuICBhZGQoZWxlbWVudDogdW5rbm93bik6IG51bWJlciB7XG4gICAgbGV0IHsgbmV4dDogc2xvdCwgYXJyYXkgfSA9IHRoaXM7XG5cbiAgICBpZiAoc2xvdCA9PT0gYXJyYXkubGVuZ3RoKSB7XG4gICAgICB0aGlzLm5leHQrKztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHByZXYgPSBhcnJheVtzbG90XSBhcyBudW1iZXI7XG4gICAgICB0aGlzLm5leHQgPSBwcmV2O1xuICAgIH1cblxuICAgIHRoaXMuYXJyYXlbc2xvdF0gPSBlbGVtZW50O1xuICAgIHJldHVybiBzbG90O1xuICB9XG5cbiAgZGVyZWYocG9pbnRlcjogbnVtYmVyKTogdW5rbm93biB7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXlbcG9pbnRlcl07XG4gIH1cblxuICBkcm9wKHBvaW50ZXI6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuYXJyYXlbcG9pbnRlcl0gPSB0aGlzLm5leHQ7XG4gICAgdGhpcy5uZXh0ID0gcG9pbnRlcjtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==