"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Storage = void 0;

var Storage = /*#__PURE__*/function () {
  function Storage() {
    this.array = [];
    this.next = 0;
  }

  var _proto = Storage.prototype;

  _proto.add = function add(element) {
    var slot = this.next,
        array = this.array;

    if (slot === array.length) {
      this.next++;
    } else {
      var prev = array[slot];
      this.next = prev;
    }

    this.array[slot] = element;
    return slot;
  };

  _proto.deref = function deref(pointer) {
    return this.array[pointer];
  };

  _proto.drop = function drop(pointer) {
    this.array[pointer] = this.next;
    this.next = pointer;
  };

  return Storage;
}();

exports.Storage = Storage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL2xvdy1sZXZlbC9saWIvZ2x1ZS9zdG9yYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFNLE9BQU4sR0FBQSxhQUFBLFlBQUE7QUFBQSxXQUFBLE9BQUEsR0FBQTtBQUNtQixTQUFBLEtBQUEsR0FBQSxFQUFBO0FBQ1QsU0FBQSxJQUFBLEdBQUEsQ0FBQTtBQXdCVDs7QUExQkQsTUFBQSxNQUFBLEdBQUEsT0FBQSxDQUFBLFNBQUE7O0FBQUEsRUFBQSxNQUFBLENBQUEsR0FBQSxHQUlFLFNBQUEsR0FBQSxDQUFBLE9BQUEsRUFBb0I7QUFBQSxRQUNkLElBRGMsR0FBQSxLQUFBLElBQUE7QUFBQSxRQUNBLEtBREEsR0FBQSxLQUFBLEtBQUE7O0FBR2xCLFFBQUksSUFBSSxLQUFLLEtBQUssQ0FBbEIsTUFBQSxFQUEyQjtBQUN6QixXQUFBLElBQUE7QUFERixLQUFBLE1BRU87QUFDTCxVQUFJLElBQUksR0FBRyxLQUFLLENBQWhCLElBQWdCLENBQWhCO0FBQ0EsV0FBQSxJQUFBLEdBQUEsSUFBQTtBQUNEOztBQUVELFNBQUEsS0FBQSxDQUFBLElBQUEsSUFBQSxPQUFBO0FBQ0EsV0FBQSxJQUFBO0FBZkosR0FBQTs7QUFBQSxFQUFBLE1BQUEsQ0FBQSxLQUFBLEdBa0JFLFNBQUEsS0FBQSxDQUFBLE9BQUEsRUFBcUI7QUFDbkIsV0FBTyxLQUFBLEtBQUEsQ0FBUCxPQUFPLENBQVA7QUFuQkosR0FBQTs7QUFBQSxFQUFBLE1BQUEsQ0FBQSxJQUFBLEdBc0JFLFNBQUEsSUFBQSxDQUFBLE9BQUEsRUFBb0I7QUFDbEIsU0FBQSxLQUFBLENBQUEsT0FBQSxJQUFzQixLQUF0QixJQUFBO0FBQ0EsU0FBQSxJQUFBLEdBQUEsT0FBQTtBQXhCSixHQUFBOztBQUFBLFNBQUEsT0FBQTtBQUFBLENBQUEsRUFBQSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBTdG9yYWdlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBhcnJheTogdW5rbm93bltdID0gW107XG4gIHByaXZhdGUgbmV4dCA9IDA7XG5cbiAgYWRkKGVsZW1lbnQ6IHVua25vd24pOiBudW1iZXIge1xuICAgIGxldCB7IG5leHQ6IHNsb3QsIGFycmF5IH0gPSB0aGlzO1xuXG4gICAgaWYgKHNsb3QgPT09IGFycmF5Lmxlbmd0aCkge1xuICAgICAgdGhpcy5uZXh0Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcmV2ID0gYXJyYXlbc2xvdF0gYXMgbnVtYmVyO1xuICAgICAgdGhpcy5uZXh0ID0gcHJldjtcbiAgICB9XG5cbiAgICB0aGlzLmFycmF5W3Nsb3RdID0gZWxlbWVudDtcbiAgICByZXR1cm4gc2xvdDtcbiAgfVxuXG4gIGRlcmVmKHBvaW50ZXI6IG51bWJlcik6IHVua25vd24ge1xuICAgIHJldHVybiB0aGlzLmFycmF5W3BvaW50ZXJdO1xuICB9XG5cbiAgZHJvcChwb2ludGVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmFycmF5W3BvaW50ZXJdID0gdGhpcy5uZXh0O1xuICAgIHRoaXMubmV4dCA9IHBvaW50ZXI7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=