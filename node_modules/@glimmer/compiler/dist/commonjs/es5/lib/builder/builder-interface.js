"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.normalizeStatement = normalizeStatement;
exports.normalizeAppendHead = normalizeAppendHead;
exports.normalizeSugaryArrayStatement = normalizeSugaryArrayStatement;
exports.normalizePathHead = normalizePathHead;
exports.normalizeBuilderBlockStatement = normalizeBuilderBlockStatement;
exports.entries = entries;
exports.isElement = isElement;
exports.extractElement = extractElement;
exports.extractAngleInvocation = extractAngleInvocation;
exports.isAngleInvocation = isAngleInvocation;
exports.isBlock = isBlock;
exports.normalizeAppendExpression = normalizeAppendExpression;
exports.normalizeExpression = normalizeExpression;
exports.isBuilderExpression = isBuilderExpression;
exports.isLiteral = isLiteral;
exports.statementIsExpression = statementIsExpression;
exports.isBuilderCallExpression = isBuilderCallExpression;
exports.normalizeParams = normalizeParams;
exports.normalizeHash = normalizeHash;
exports.normalizeCallExpression = normalizeCallExpression;
exports.VariableKind = void 0;

var _util = require("@glimmer/util");

var VariableKind;
exports.VariableKind = VariableKind;

(function (VariableKind) {
  VariableKind["Local"] = "Local";
  VariableKind["Free"] = "Free";
  VariableKind["Arg"] = "Arg";
  VariableKind["Block"] = "Block";
  VariableKind["This"] = "This";
})(VariableKind || (exports.VariableKind = VariableKind = {}));

function normalizeStatement(statement) {
  if (Array.isArray(statement)) {
    if (statementIsExpression(statement)) {
      return normalizeAppendExpression(statement);
    } else if (isSugaryArrayStatement(statement)) {
      return normalizeSugaryArrayStatement(statement);
    } else {
      return normalizeVerboseStatement(statement);
    }
  } else if (typeof statement === 'string') {
    return normalizeAppendHead(normalizeDottedPath(statement), false);
  } else {
    throw (0, _util.assertNever)(statement);
  }
}

function normalizeAppendHead(head, trusted) {
  if (head.type === "GetPath"
  /* GetPath */
  ) {
      return {
        kind: "AppendPath"
        /* AppendPath */
        ,
        path: head,
        trusted: trusted
      };
    } else {
    return {
      kind: "AppendExpr"
      /* AppendExpr */
      ,
      expr: head,
      trusted: trusted
    };
  }
}

function isSugaryArrayStatement(statement) {
  if (Array.isArray(statement) && typeof statement[0] === 'string') {
    switch (statement[0][0]) {
      case '(':
      case '#':
      case '<':
      case '!':
        return true;

      default:
        return false;
    }
  }

  return false;
}

function normalizeSugaryArrayStatement(statement) {
  var name = statement[0];

  switch (name[0]) {
    case '(':
      {
        var params = null;
        var hash = null;

        if (statement.length === 3) {
          params = normalizeParams(statement[1]);
          hash = normalizeHash(statement[2]);
        } else if (statement.length === 2) {
          if (Array.isArray(statement[1])) {
            params = normalizeParams(statement[1]);
          } else {
            hash = normalizeHash(statement[1]);
          }
        }

        return {
          kind: "Call"
          /* Call */
          ,
          head: normalizeCallHead(name),
          params: params,
          hash: hash,
          trusted: false
        };
      }

    case '#':
      {
        var _normalizeBuilderBloc = normalizeBuilderBlockStatement(statement),
            path = _normalizeBuilderBloc.head,
            _params = _normalizeBuilderBloc.params,
            _hash = _normalizeBuilderBloc.hash,
            blocks = _normalizeBuilderBloc.blocks,
            blockParams = _normalizeBuilderBloc.blockParams;

        return {
          kind: "Block"
          /* Block */
          ,
          head: path,
          params: _params,
          hash: _hash,
          blocks: blocks,
          blockParams: blockParams
        };
      }

    case '!':
      {
        var _name = statement[0].slice(1);

        var _normalizeBuilderBloc2 = normalizeBuilderBlockStatement(statement),
            _params2 = _normalizeBuilderBloc2.params,
            _hash2 = _normalizeBuilderBloc2.hash,
            _blocks = _normalizeBuilderBloc2.blocks,
            _blockParams = _normalizeBuilderBloc2.blockParams;

        return {
          kind: "Keyword"
          /* Keyword */
          ,
          name: _name,
          params: _params2,
          hash: _hash2,
          blocks: _blocks,
          blockParams: _blockParams
        };
      }

    case '<':
      {
        var attrs = (0, _util.dict)();
        var block = [];

        if (statement.length === 3) {
          attrs = normalizeAttrs(statement[1]);
          block = normalizeBlock(statement[2]);
        } else if (statement.length === 2) {
          if (Array.isArray(statement[1])) {
            block = normalizeBlock(statement[1]);
          } else {
            attrs = normalizeAttrs(statement[1]);
          }
        }

        return {
          kind: "Element"
          /* Element */
          ,
          name: extractElement(name),
          attrs: attrs,
          block: block
        };
      }

    default:
      throw new Error("Unreachable " + JSON.stringify(statement) + " in normalizeSugaryArrayStatement");
  }
}

function normalizeVerboseStatement(statement) {
  switch (statement[0]) {
    case 0
    /* Literal */
    :
      {
        return {
          kind: "Literal"
          /* Literal */
          ,
          value: statement[1]
        };
      }

    case 2
    /* Append */
    :
      {
        return normalizeAppendExpression(statement[1], statement[2]);
      }

    case 3
    /* Modifier */
    :
      {
        return {
          kind: "Modifier"
          /* Modifier */
          ,
          params: normalizeParams(statement[1]),
          hash: normalizeHash(statement[2])
        };
      }

    case 4
    /* DynamicComponent */
    :
      {
        return {
          kind: "DynamicComponent"
          /* DynamicComponent */
          ,
          expr: normalizeExpression(statement[1]),
          hash: normalizeHash(statement[2]),
          block: normalizeBlock(statement[3])
        };
      }

    case 1
    /* Comment */
    :
      {
        return {
          kind: "Comment"
          /* Comment */
          ,
          value: statement[1]
        };
      }
  }
}

function extractBlockHead(name) {
  var result = /^(#|!)(.*)$/.exec(name);

  if (result === null) {
    throw new Error("Unexpected missing # in block head");
  }

  return normalizeDottedPath(result[2]);
}

function normalizeCallHead(name) {
  var result = /^\((.*)\)$/.exec(name);

  if (result === null) {
    throw new Error("Unexpected missing () in call head");
  }

  return normalizeDottedPath(result[1]);
}

function normalizePath(head, tail) {
  if (tail === void 0) {
    tail = [];
  }

  var pathHead = normalizePathHead(head);

  if ((0, _util.isPresent)(tail)) {
    return {
      type: "GetPath"
      /* GetPath */
      ,
      path: {
        head: pathHead,
        tail: tail
      }
    };
  } else {
    return {
      type: "GetVar"
      /* GetVar */
      ,
      variable: pathHead
    };
  }
}

function normalizeDottedPath(whole) {
  var _normalizePathHead = normalizePathHead(whole),
      kind = _normalizePathHead.kind,
      rest = _normalizePathHead.name;

  var _rest$split = rest.split('.'),
      name = _rest$split[0],
      tail = _rest$split.slice(1);

  var variable = {
    kind: kind,
    name: name,
    mode: 'loose'
  };

  if ((0, _util.isPresent)(tail)) {
    return {
      type: "GetPath"
      /* GetPath */
      ,
      path: {
        head: variable,
        tail: tail
      }
    };
  } else {
    return {
      type: "GetVar"
      /* GetVar */
      ,
      variable: variable
    };
  }
}

function normalizePathHead(whole) {
  var kind;
  var name;

  if (/^this(\.|$)/.exec(whole)) {
    return {
      kind: VariableKind.This,
      name: whole,
      mode: 'loose'
    };
  }

  switch (whole[0]) {
    case '^':
      kind = VariableKind.Free;
      name = whole.slice(1);
      break;

    case '@':
      kind = VariableKind.Arg;
      name = whole.slice(1);
      break;

    case '&':
      kind = VariableKind.Block;
      name = whole.slice(1);
      break;

    default:
      kind = VariableKind.Local;
      name = whole;
  }

  return {
    kind: kind,
    name: name,
    mode: 'loose'
  };
}

function normalizeBuilderBlockStatement(statement) {
  var head = statement[0];
  var blocks = (0, _util.dict)();
  var params = null;
  var hash = null;
  var blockParams = null;

  if (statement.length === 2) {
    blocks = normalizeBlocks(statement[1]);
  } else if (statement.length === 3) {
    if (Array.isArray(statement[1])) {
      params = normalizeParams(statement[1]);
    } else {
      var _normalizeBlockHash = normalizeBlockHash(statement[1]);

      hash = _normalizeBlockHash.hash;
      blockParams = _normalizeBlockHash.blockParams;
    }

    blocks = normalizeBlocks(statement[2]);
  } else if (statement.length === 4) {
    params = normalizeParams(statement[1]);

    var _normalizeBlockHash2 = normalizeBlockHash(statement[2]);

    hash = _normalizeBlockHash2.hash;
    blockParams = _normalizeBlockHash2.blockParams;
    blocks = normalizeBlocks(statement[3]);
  }

  return {
    head: extractBlockHead(head),
    params: params,
    hash: hash,
    blockParams: blockParams,
    blocks: blocks
  };
}

function normalizeBlockHash(hash) {
  if (hash === null) {
    return {
      hash: null,
      blockParams: null
    };
  }

  var out = null;
  var blockParams = null;
  entries(hash, function (key, value) {
    if (key === 'as') {
      blockParams = Array.isArray(value) ? value : [value];
    } else {
      out = out || (0, _util.dict)();
      out[key] = normalizeExpression(value);
    }
  });
  return {
    hash: out,
    blockParams: blockParams
  };
}

function entries(dict, callback) {
  Object.keys(dict).forEach(function (key) {
    var value = dict[key];
    callback(key, value);
  });
}

function normalizeBlocks(value) {
  if (Array.isArray(value)) {
    return {
      "default": normalizeBlock(value)
    };
  } else {
    return mapObject(value, normalizeBlock);
  }
}

function normalizeBlock(block) {
  return block.map(function (s) {
    return normalizeStatement(s);
  });
}

function normalizeAttrs(attrs) {
  return mapObject(attrs, function (a) {
    return normalizeAttr(a).expr;
  });
}

function normalizeAttr(attr) {
  if (attr === 'splat') {
    return {
      expr: "Splat"
      /* Splat */
      ,
      trusted: false
    };
  } else {
    var expr = normalizeExpression(attr);
    return {
      expr: expr,
      trusted: false
    };
  }
}

function mapObject(object, callback) {
  var out = (0, _util.dict)();
  Object.keys(object).forEach(function (k) {
    out[k] = callback(object[k], k);
  });
  return out;
}

function isElement(input) {
  var match = /^<([a-z0-9\-][a-zA-Z0-9\-]*)>$/.exec(input[0]);
  return !!match && !!match[1];
}

function extractElement(input) {
  var match = /^<([a-z0-9\-][a-zA-Z0-9\-]*)>$/.exec(input);
  return match ? match[1] : null;
}

function extractAngleInvocation(input) {
  var match = /^<(@[a-zA-Z0-9]*|[A-Z][a-zA-Z0-9\-]*)>$/.exec(input[0]);
  return match ? match[1] : null;
}

function isAngleInvocation(input) {
  // TODO Paths
  var match = /^<(@[a-zA-Z0-9]*|[A-Z][a-zA-Z0-9\-]*)>$/.exec(input[0]);
  return !!match && !!match[1];
}

function isBlock(input) {
  // TODO Paths
  var match = /^#[^]?([a-zA-Z0-9]*|[A-Z][a-zA-Z0-9\-]*)$/.exec(input[0]);
  return !!match && !!match[1];
}

function normalizeAppendExpression(expression, forceTrusted) {
  if (forceTrusted === void 0) {
    forceTrusted = false;
  }

  if (expression === null || expression === undefined) {
    return {
      expr: {
        type: "Literal"
        /* Literal */
        ,
        value: expression
      },
      kind: "AppendExpr"
      /* AppendExpr */
      ,
      trusted: false
    };
  } else if (Array.isArray(expression)) {
    switch (expression[0]) {
      case 0
      /* Literal */
      :
        return {
          expr: {
            type: "Literal"
            /* Literal */
            ,
            value: expression[1]
          },
          kind: "AppendExpr"
          /* AppendExpr */
          ,
          trusted: false
        };

      case 5
      /* Get */
      :
        {
          return normalizeAppendHead(normalizePath(expression[1], expression[2]), forceTrusted);
        }

      case 6
      /* Concat */
      :
        {
          var expr = {
            type: "Concat"
            /* Concat */
            ,
            params: normalizeParams(expression.slice(1))
          };
          return {
            expr: expr,
            kind: "AppendExpr"
            /* AppendExpr */
            ,
            trusted: forceTrusted
          };
        }

      case 7
      /* HasBlock */
      :
        return {
          expr: {
            type: "HasBlock"
            /* HasBlock */
            ,
            name: expression[1]
          },
          kind: "AppendExpr"
          /* AppendExpr */
          ,
          trusted: forceTrusted
        };

      case 8
      /* HasBlockParams */
      :
        return {
          expr: {
            type: "HasBlockParams"
            /* HasBlockParams */
            ,
            name: expression[1]
          },
          kind: "AppendExpr"
          /* AppendExpr */
          ,
          trusted: forceTrusted
        };

      default:
        {
          if (isBuilderCallExpression(expression)) {
            return {
              expr: normalizeCallExpression(expression),
              kind: "AppendExpr"
              /* AppendExpr */
              ,
              trusted: forceTrusted
            };
          } else {
            throw new Error("Unexpected array in expression position (wasn't a tuple expression and " + expression[0] + " isn't wrapped in parens, so it isn't a call): " + JSON.stringify(expression));
          }
        }
      // BuilderCallExpression
    }
  } else if (typeof expression !== 'object') {
    switch (typeof expression) {
      case 'string':
        {
          return normalizeAppendHead(normalizeDottedPath(expression), forceTrusted);
        }

      case 'boolean':
      case 'number':
        return {
          expr: {
            type: "Literal"
            /* Literal */
            ,
            value: expression
          },
          kind: "AppendExpr"
          /* AppendExpr */
          ,
          trusted: true
        };

      default:
        throw (0, _util.assertNever)(expression);
    }
  } else {
    throw (0, _util.assertNever)(expression);
  }
}

function normalizeExpression(expression) {
  if (expression === null || expression === undefined) {
    return {
      type: "Literal"
      /* Literal */
      ,
      value: expression
    };
  } else if (Array.isArray(expression)) {
    switch (expression[0]) {
      case 0
      /* Literal */
      :
        return {
          type: "Literal"
          /* Literal */
          ,
          value: expression[1]
        };

      case 5
      /* Get */
      :
        {
          return normalizePath(expression[1], expression[2]);
        }

      case 6
      /* Concat */
      :
        {
          var expr = {
            type: "Concat"
            /* Concat */
            ,
            params: normalizeParams(expression.slice(1))
          };
          return expr;
        }

      case 7
      /* HasBlock */
      :
        return {
          type: "HasBlock"
          /* HasBlock */
          ,
          name: expression[1]
        };

      case 8
      /* HasBlockParams */
      :
        return {
          type: "HasBlockParams"
          /* HasBlockParams */
          ,
          name: expression[1]
        };

      default:
        {
          if (isBuilderCallExpression(expression)) {
            return normalizeCallExpression(expression);
          } else {
            throw new Error("Unexpected array in expression position (wasn't a tuple expression and " + expression[0] + " isn't wrapped in parens, so it isn't a call): " + JSON.stringify(expression));
          }
        }
      // BuilderCallExpression
    }
  } else if (typeof expression !== 'object') {
    switch (typeof expression) {
      case 'string':
        {
          return normalizeDottedPath(expression);
        }

      case 'boolean':
      case 'number':
        return {
          type: "Literal"
          /* Literal */
          ,
          value: expression
        };

      default:
        throw (0, _util.assertNever)(expression);
    }
  } else {
    throw (0, _util.assertNever)(expression);
  }
}

function isBuilderExpression(expr) {
  return Array.isArray(expr);
}

function isLiteral(expr) {
  return Array.isArray(expr) && expr[0] === 'literal';
}

function statementIsExpression(statement) {
  if (!Array.isArray(statement)) {
    return false;
  }

  var name = statement[0];

  if (typeof name === 'number') {
    switch (name) {
      case 0
      /* Literal */
      :
      case 5
      /* Get */
      :
      case 6
      /* Concat */
      :
      case 7
      /* HasBlock */
      :
      case 8
      /* HasBlockParams */
      :
        return true;

      default:
        return false;
    }
  }

  if (name[0] === '(') {
    return true;
  }

  return false;
}

function isBuilderCallExpression(value) {
  return typeof value[0] === 'string' && value[0][0] === '(';
}

function normalizeParams(input) {
  return input.map(normalizeExpression);
}

function normalizeHash(input) {
  if (input === null) return null;
  return mapObject(input, normalizeExpression);
}

function normalizeCallExpression(expr) {
  switch (expr.length) {
    case 1:
      return {
        type: "Call"
        /* Call */
        ,
        head: normalizeCallHead(expr[0]),
        params: null,
        hash: null
      };

    case 2:
      {
        if (Array.isArray(expr[1])) {
          return {
            type: "Call"
            /* Call */
            ,
            head: normalizeCallHead(expr[0]),
            params: normalizeParams(expr[1]),
            hash: null
          };
        } else {
          return {
            type: "Call"
            /* Call */
            ,
            head: normalizeCallHead(expr[0]),
            params: null,
            hash: normalizeHash(expr[1])
          };
        }
      }

    case 3:
      return {
        type: "Call"
        /* Call */
        ,
        head: normalizeCallHead(expr[0]),
        params: normalizeParams(expr[1]),
        hash: normalizeHash(expr[2])
      };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL2NvbXBpbGVyL2xpYi9idWlsZGVyL2J1aWxkZXItaW50ZXJmYWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBOztBQXlDQSxJQUFBLFlBQUE7OztBQUFBLENBQUEsVUFBQSxZQUFBLEVBQXdCO0FBQ3RCLEVBQUEsWUFBQSxDQUFBLE9BQUEsQ0FBQSxHQUFBLE9BQUE7QUFDQSxFQUFBLFlBQUEsQ0FBQSxNQUFBLENBQUEsR0FBQSxNQUFBO0FBQ0EsRUFBQSxZQUFBLENBQUEsS0FBQSxDQUFBLEdBQUEsS0FBQTtBQUNBLEVBQUEsWUFBQSxDQUFBLE9BQUEsQ0FBQSxHQUFBLE9BQUE7QUFDQSxFQUFBLFlBQUEsQ0FBQSxNQUFBLENBQUEsR0FBQSxNQUFBO0FBTEYsQ0FBQSxFQUFZLFlBQVksNEJBQVosWUFBWSxHQUF4QixFQUF3QixDQUF4Qjs7QUFrRk0sU0FBQSxrQkFBQSxDQUFBLFNBQUEsRUFBd0Q7QUFDNUQsTUFBSSxLQUFLLENBQUwsT0FBQSxDQUFKLFNBQUksQ0FBSixFQUE4QjtBQUM1QixRQUFJLHFCQUFxQixDQUF6QixTQUF5QixDQUF6QixFQUFzQztBQUNwQyxhQUFPLHlCQUF5QixDQUFoQyxTQUFnQyxDQUFoQztBQURGLEtBQUEsTUFFTyxJQUFJLHNCQUFzQixDQUExQixTQUEwQixDQUExQixFQUF1QztBQUM1QyxhQUFPLDZCQUE2QixDQUFwQyxTQUFvQyxDQUFwQztBQURLLEtBQUEsTUFFQTtBQUNMLGFBQU8seUJBQXlCLENBQWhDLFNBQWdDLENBQWhDO0FBQ0Q7QUFQSCxHQUFBLE1BUU8sSUFBSSxPQUFBLFNBQUEsS0FBSixRQUFBLEVBQW1DO0FBQ3hDLFdBQU8sbUJBQW1CLENBQUMsbUJBQW1CLENBQXBCLFNBQW9CLENBQXBCLEVBQTFCLEtBQTBCLENBQTFCO0FBREssR0FBQSxNQUVBO0FBQ0wsVUFBTSx1QkFBTixTQUFN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LElBQUksQ0FGdkIsQ0FFdUIsQ0FBTCxDQUZsQjtBQUdMLFFBQUEsTUFBTSxFQUhELElBQUE7QUFJTCxRQUFBLElBQUksRUFBRTtBQUpELE9BQVA7O0FBTUYsU0FBQSxDQUFBO0FBQVE7QUFDTixZQUFJLEtBQUssQ0FBTCxPQUFBLENBQWMsSUFBSSxDQUF0QixDQUFzQixDQUFsQixDQUFKLEVBQTRCO0FBQzFCLGlCQUFPO0FBQ0wsWUFBQSxJQUFJLEVBQUE7QUFBQTtBQURDO0FBRUwsWUFBQSxJQUFJLEVBQUUsaUJBQWlCLENBQUMsSUFBSSxDQUZ2QixDQUV1QixDQUFMLENBRmxCO0FBR0wsWUFBQSxNQUFNLEVBQUUsZUFBZSxDQUFDLElBQUksQ0FIdkIsQ0FHdUIsQ0FBTCxDQUhsQjtBQUlMLFlBQUEsSUFBSSxFQUFFO0FBSkQsV0FBUDtBQURGLFNBQUEsTUFPTztBQUNMLGlCQUFPO0FBQ0wsWUFBQSxJQUFJLEVBQUE7QUFBQTtBQURDO0FBRUwsWUFBQSxJQUFJLEVBQUUsaUJBQWlCLENBQUMsSUFBSSxDQUZ2QixDQUV1QixDQUFMLENBRmxCO0FBR0wsWUFBQSxNQUFNLEVBSEQsSUFBQTtBQUlMLFlBQUEsSUFBSSxFQUFFLGFBQWEsQ0FBQyxJQUFJLENBQUwsQ0FBSyxDQUFMO0FBSmQsV0FBUDtBQU1EO0FBQ0Y7O0FBRUQsU0FBQSxDQUFBO0FBQ0UsYUFBTztBQUNMLFFBQUEsSUFBSSxFQUFBO0FBQUE7QUFEQztBQUVMLFFBQUEsSUFBSSxFQUFFLGlCQUFpQixDQUFDLElBQUksQ0FGdkIsQ0FFdUIsQ0FBTCxDQUZsQjtBQUdMLFFBQUEsTUFBTSxFQUFFLGVBQWUsQ0FBQyxJQUFJLENBSHZCLENBR3VCLENBQUwsQ0FIbEI7QUFJTCxRQUFBLElBQUksRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFMLENBQUssQ0FBTDtBQUpkLE9BQVA7QUEzQko7QUFrQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaWN0LCBEaWN0VmFsdWUsIE9wdGlvbiwgUHJlc2VudEFycmF5IH0gZnJvbSAnQGdsaW1tZXIvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBhc3NlcnROZXZlciwgZGljdCwgZXhwZWN0LCBpc1ByZXNlbnQgfSBmcm9tICdAZ2xpbW1lci91dGlsJztcblxuZXhwb3J0IHR5cGUgQnVpbGRlclBhcmFtcyA9IEJ1aWxkZXJFeHByZXNzaW9uW107XG5leHBvcnQgdHlwZSBCdWlsZGVySGFzaCA9IE9wdGlvbjxEaWN0PEJ1aWxkZXJFeHByZXNzaW9uPj47XG5leHBvcnQgdHlwZSBCdWlsZGVyQmxvY2tIYXNoID0gQnVpbGRlckhhc2ggfCB7IGFzOiBzdHJpbmcgfCBzdHJpbmdbXSB9O1xuZXhwb3J0IHR5cGUgQnVpbGRlckJsb2NrcyA9IERpY3Q8QnVpbGRlckJsb2NrPjtcbmV4cG9ydCB0eXBlIEJ1aWxkZXJBdHRycyA9IERpY3Q8QnVpbGRlckF0dHI+O1xuXG5leHBvcnQgdHlwZSBOb3JtYWxpemVkUGFyYW1zID0gTm9ybWFsaXplZEV4cHJlc3Npb25bXTtcbmV4cG9ydCB0eXBlIE5vcm1hbGl6ZWRIYXNoID0gRGljdDxOb3JtYWxpemVkRXhwcmVzc2lvbj47XG5leHBvcnQgdHlwZSBOb3JtYWxpemVkQmxvY2sgPSBOb3JtYWxpemVkU3RhdGVtZW50W107XG5leHBvcnQgdHlwZSBOb3JtYWxpemVkQmxvY2tzID0gRGljdDxOb3JtYWxpemVkQmxvY2s+O1xuZXhwb3J0IHR5cGUgTm9ybWFsaXplZEF0dHJzID0gRGljdDxOb3JtYWxpemVkQXR0cj47XG5leHBvcnQgdHlwZSBOb3JtYWxpemVkQXR0ciA9IEhlYWRLaW5kLlNwbGF0IHwgTm9ybWFsaXplZEV4cHJlc3Npb247XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9ybWFsaXplZEVsZW1lbnQge1xuICBuYW1lOiBzdHJpbmc7XG4gIGF0dHJzOiBPcHRpb248Tm9ybWFsaXplZEF0dHJzPjtcbiAgYmxvY2s6IE9wdGlvbjxOb3JtYWxpemVkQmxvY2s+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vcm1hbGl6ZWRBbmdsZUludm9jYXRpb24ge1xuICBoZWFkOiBOb3JtYWxpemVkRXhwcmVzc2lvbjtcbiAgYXR0cnM6IE9wdGlvbjxOb3JtYWxpemVkQXR0cnM+O1xuICBibG9jazogT3B0aW9uPE5vcm1hbGl6ZWRCbG9jaz47XG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIEhlYWRLaW5kIHtcbiAgQmxvY2sgPSAnQmxvY2snLFxuICBDYWxsID0gJ0NhbGwnLFxuICBFbGVtZW50ID0gJ0VsZW1lbnQnLFxuICBBcHBlbmRQYXRoID0gJ0FwcGVuZFBhdGgnLFxuICBBcHBlbmRFeHByID0gJ0FwcGVuZEV4cHInLFxuICBMaXRlcmFsID0gJ0xpdGVyYWwnLFxuICBNb2RpZmllciA9ICdNb2RpZmllcicsXG4gIER5bmFtaWNDb21wb25lbnQgPSAnRHluYW1pY0NvbXBvbmVudCcsXG4gIENvbW1lbnQgPSAnQ29tbWVudCcsXG4gIFNwbGF0ID0gJ1NwbGF0JyxcbiAgS2V5d29yZCA9ICdLZXl3b3JkJyxcbn1cblxuZXhwb3J0IGVudW0gVmFyaWFibGVLaW5kIHtcbiAgTG9jYWwgPSAnTG9jYWwnLFxuICBGcmVlID0gJ0ZyZWUnLFxuICBBcmcgPSAnQXJnJyxcbiAgQmxvY2sgPSAnQmxvY2snLFxuICBUaGlzID0gJ1RoaXMnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhcmlhYmxlIHtcbiAga2luZDogVmFyaWFibGVLaW5kO1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBEaWZmZXJlbmNlczpcbiAgICpcbiAgICogLSBzdHJpY3QgbW9kZSB2YXJpYWJsZXMgYWx3YXlzIHJlZmVyIHRvIGluLXNjb3BlIHZhcmlhYmxlc1xuICAgKiAtIGxvb3NlIG1vZGUgdmFyaWFibGVzIHVzZSB0aGlzIGFsZ29yaXRobTpcbiAgICogICAxLiBvdGhlcndpc2UsIGZhbGwgYmFjayB0byBgdGhpcy48bmFtZT5gXG4gICAqL1xuICBtb2RlOiAnbG9vc2UnIHwgJ3N0cmljdCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF0aCB7XG4gIGhlYWQ6IFZhcmlhYmxlO1xuICB0YWlsOiBQcmVzZW50QXJyYXk8c3RyaW5nPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHBlbmRFeHByIHtcbiAga2luZDogSGVhZEtpbmQuQXBwZW5kRXhwcjtcbiAgZXhwcjogTm9ybWFsaXplZEV4cHJlc3Npb247XG4gIHRydXN0ZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwZW5kUGF0aCB7XG4gIGtpbmQ6IEhlYWRLaW5kLkFwcGVuZFBhdGg7XG4gIHBhdGg6IE5vcm1hbGl6ZWRQYXRoO1xuICB0cnVzdGVkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vcm1hbGl6ZWRLZXl3b3JkU3RhdGVtZW50IHtcbiAga2luZDogSGVhZEtpbmQuS2V5d29yZDtcbiAgbmFtZTogc3RyaW5nO1xuICBwYXJhbXM6IE9wdGlvbjxOb3JtYWxpemVkUGFyYW1zPjtcbiAgaGFzaDogT3B0aW9uPE5vcm1hbGl6ZWRIYXNoPjtcbiAgYmxvY2tQYXJhbXM6IE9wdGlvbjxzdHJpbmdbXT47XG4gIGJsb2NrczogTm9ybWFsaXplZEJsb2Nrcztcbn1cblxuZXhwb3J0IHR5cGUgTm9ybWFsaXplZFN0YXRlbWVudCA9XG4gIHwge1xuICAgICAga2luZDogSGVhZEtpbmQuQ2FsbDtcbiAgICAgIGhlYWQ6IE5vcm1hbGl6ZWRIZWFkO1xuICAgICAgcGFyYW1zOiBPcHRpb248Tm9ybWFsaXplZFBhcmFtcz47XG4gICAgICBoYXNoOiBPcHRpb248Tm9ybWFsaXplZEhhc2g+O1xuICAgICAgdHJ1c3RlZDogYm9vbGVhbjtcbiAgICB9XG4gIHwge1xuICAgICAga2luZDogSGVhZEtpbmQuQmxvY2s7XG4gICAgICBoZWFkOiBOb3JtYWxpemVkSGVhZDtcbiAgICAgIHBhcmFtczogT3B0aW9uPE5vcm1hbGl6ZWRQYXJhbXM+O1xuICAgICAgaGFzaDogT3B0aW9uPE5vcm1hbGl6ZWRIYXNoPjtcbiAgICAgIGJsb2NrUGFyYW1zOiBPcHRpb248c3RyaW5nW10+O1xuICAgICAgYmxvY2tzOiBOb3JtYWxpemVkQmxvY2tzO1xuICAgIH1cbiAgfCBOb3JtYWxpemVkS2V5d29yZFN0YXRlbWVudFxuICB8IHtcbiAgICAgIGtpbmQ6IEhlYWRLaW5kLkVsZW1lbnQ7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICBhdHRyczogTm9ybWFsaXplZEF0dHJzO1xuICAgICAgYmxvY2s6IE5vcm1hbGl6ZWRCbG9jaztcbiAgICB9XG4gIHwgeyBraW5kOiBIZWFkS2luZC5Db21tZW50OyB2YWx1ZTogc3RyaW5nIH1cbiAgfCB7IGtpbmQ6IEhlYWRLaW5kLkxpdGVyYWw7IHZhbHVlOiBzdHJpbmcgfVxuICB8IEFwcGVuZFBhdGhcbiAgfCBBcHBlbmRFeHByXG4gIHwgeyBraW5kOiBIZWFkS2luZC5Nb2RpZmllcjsgcGFyYW1zOiBOb3JtYWxpemVkUGFyYW1zOyBoYXNoOiBPcHRpb248Tm9ybWFsaXplZEhhc2g+IH1cbiAgfCB7XG4gICAgICBraW5kOiBIZWFkS2luZC5EeW5hbWljQ29tcG9uZW50O1xuICAgICAgZXhwcjogTm9ybWFsaXplZEV4cHJlc3Npb247XG4gICAgICBoYXNoOiBPcHRpb248Tm9ybWFsaXplZEhhc2g+O1xuICAgICAgYmxvY2s6IE5vcm1hbGl6ZWRCbG9jaztcbiAgICB9O1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplU3RhdGVtZW50KHN0YXRlbWVudDogQnVpbGRlclN0YXRlbWVudCk6IE5vcm1hbGl6ZWRTdGF0ZW1lbnQge1xuICBpZiAoQXJyYXkuaXNBcnJheShzdGF0ZW1lbnQpKSB7XG4gICAgaWYgKHN0YXRlbWVudElzRXhwcmVzc2lvbihzdGF0ZW1lbnQpKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplQXBwZW5kRXhwcmVzc2lvbihzdGF0ZW1lbnQpO1xuICAgIH0gZWxzZSBpZiAoaXNTdWdhcnlBcnJheVN0YXRlbWVudChzdGF0ZW1lbnQpKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplU3VnYXJ5QXJyYXlTdGF0ZW1lbnQoc3RhdGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZVZlcmJvc2VTdGF0ZW1lbnQoc3RhdGVtZW50KTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHN0YXRlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplQXBwZW5kSGVhZChub3JtYWxpemVEb3R0ZWRQYXRoKHN0YXRlbWVudCksIGZhbHNlKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBhc3NlcnROZXZlcihzdGF0ZW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVBcHBlbmRIZWFkKFxuICBoZWFkOiBOb3JtYWxpemVkSGVhZCxcbiAgdHJ1c3RlZDogYm9vbGVhblxuKTogQXBwZW5kRXhwciB8IEFwcGVuZFBhdGgge1xuICBpZiAoaGVhZC50eXBlID09PSBFeHByZXNzaW9uS2luZC5HZXRQYXRoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEhlYWRLaW5kLkFwcGVuZFBhdGgsXG4gICAgICBwYXRoOiBoZWFkLFxuICAgICAgdHJ1c3RlZCxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBIZWFkS2luZC5BcHBlbmRFeHByLFxuICAgICAgZXhwcjogaGVhZCxcbiAgICAgIHRydXN0ZWQsXG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1N1Z2FyeUFycmF5U3RhdGVtZW50KHN0YXRlbWVudDogQnVpbGRlclN0YXRlbWVudCk6IHN0YXRlbWVudCBpcyBTdWdhcnlBcnJheVN0YXRlbWVudCB7XG4gIGlmIChBcnJheS5pc0FycmF5KHN0YXRlbWVudCkgJiYgdHlwZW9mIHN0YXRlbWVudFswXSA9PT0gJ3N0cmluZycpIHtcbiAgICBzd2l0Y2ggKHN0YXRlbWVudFswXVswXSkge1xuICAgICAgY2FzZSAnKCc6XG4gICAgICBjYXNlICcjJzpcbiAgICAgIGNhc2UgJzwnOlxuICAgICAgY2FzZSAnISc6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IHR5cGUgU3VnYXJ5QXJyYXlTdGF0ZW1lbnQgPSBCdWlsZGVyQ2FsbEV4cHJlc3Npb24gfCBCdWlsZGVyRWxlbWVudCB8IEJ1aWxkZXJCbG9ja1N0YXRlbWVudDtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVN1Z2FyeUFycmF5U3RhdGVtZW50KFxuICBzdGF0ZW1lbnQ6IFN1Z2FyeUFycmF5U3RhdGVtZW50XG4pOiBOb3JtYWxpemVkU3RhdGVtZW50IHtcbiAgbGV0IG5hbWUgPSBzdGF0ZW1lbnRbMF07XG5cbiAgc3dpdGNoIChuYW1lWzBdKSB7XG4gICAgY2FzZSAnKCc6IHtcbiAgICAgIGxldCBwYXJhbXM6IE9wdGlvbjxOb3JtYWxpemVkUGFyYW1zPiA9IG51bGw7XG4gICAgICBsZXQgaGFzaDogT3B0aW9uPE5vcm1hbGl6ZWRIYXNoPiA9IG51bGw7XG5cbiAgICAgIGlmIChzdGF0ZW1lbnQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIHBhcmFtcyA9IG5vcm1hbGl6ZVBhcmFtcyhzdGF0ZW1lbnRbMV0gYXMgUGFyYW1zKTtcbiAgICAgICAgaGFzaCA9IG5vcm1hbGl6ZUhhc2goc3RhdGVtZW50WzJdIGFzIEhhc2gpO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZW1lbnQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN0YXRlbWVudFsxXSkpIHtcbiAgICAgICAgICBwYXJhbXMgPSBub3JtYWxpemVQYXJhbXMoc3RhdGVtZW50WzFdIGFzIFBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaGFzaCA9IG5vcm1hbGl6ZUhhc2goc3RhdGVtZW50WzFdIGFzIEhhc2gpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6IEhlYWRLaW5kLkNhbGwsXG4gICAgICAgIGhlYWQ6IG5vcm1hbGl6ZUNhbGxIZWFkKG5hbWUpLFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIGhhc2gsXG4gICAgICAgIHRydXN0ZWQ6IGZhbHNlLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjYXNlICcjJzoge1xuICAgICAgbGV0IHsgaGVhZDogcGF0aCwgcGFyYW1zLCBoYXNoLCBibG9ja3MsIGJsb2NrUGFyYW1zIH0gPSBub3JtYWxpemVCdWlsZGVyQmxvY2tTdGF0ZW1lbnQoXG4gICAgICAgIHN0YXRlbWVudCBhcyBCdWlsZGVyQmxvY2tTdGF0ZW1lbnRcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6IEhlYWRLaW5kLkJsb2NrLFxuICAgICAgICBoZWFkOiBwYXRoLFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIGhhc2gsXG4gICAgICAgIGJsb2NrcyxcbiAgICAgICAgYmxvY2tQYXJhbXMsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNhc2UgJyEnOiB7XG4gICAgICBsZXQgbmFtZSA9IHN0YXRlbWVudFswXS5zbGljZSgxKTtcbiAgICAgIGxldCB7IHBhcmFtcywgaGFzaCwgYmxvY2tzLCBibG9ja1BhcmFtcyB9ID0gbm9ybWFsaXplQnVpbGRlckJsb2NrU3RhdGVtZW50KFxuICAgICAgICBzdGF0ZW1lbnQgYXMgQnVpbGRlckJsb2NrU3RhdGVtZW50XG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiBIZWFkS2luZC5LZXl3b3JkLFxuICAgICAgICBuYW1lLFxuICAgICAgICBwYXJhbXMsXG4gICAgICAgIGhhc2gsXG4gICAgICAgIGJsb2NrcyxcbiAgICAgICAgYmxvY2tQYXJhbXMsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNhc2UgJzwnOiB7XG4gICAgICBsZXQgYXR0cnM6IE5vcm1hbGl6ZWRBdHRycyA9IGRpY3QoKTtcbiAgICAgIGxldCBibG9jazogTm9ybWFsaXplZEJsb2NrID0gW107XG5cbiAgICAgIGlmIChzdGF0ZW1lbnQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIGF0dHJzID0gbm9ybWFsaXplQXR0cnMoc3RhdGVtZW50WzFdIGFzIEJ1aWxkZXJBdHRycyk7XG4gICAgICAgIGJsb2NrID0gbm9ybWFsaXplQmxvY2soc3RhdGVtZW50WzJdIGFzIEJ1aWxkZXJCbG9jayk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlbWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3RhdGVtZW50WzFdKSkge1xuICAgICAgICAgIGJsb2NrID0gbm9ybWFsaXplQmxvY2soc3RhdGVtZW50WzFdIGFzIEJ1aWxkZXJCbG9jayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0cnMgPSBub3JtYWxpemVBdHRycyhzdGF0ZW1lbnRbMV0gYXMgQnVpbGRlckF0dHJzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiBIZWFkS2luZC5FbGVtZW50LFxuICAgICAgICBuYW1lOiBleHBlY3QoZXh0cmFjdEVsZW1lbnQobmFtZSksIGBCVUc6IGV4cGVjdGVkICR7bmFtZX0gdG8gbG9vayBsaWtlIGEgdGFnIG5hbWVgKSxcbiAgICAgICAgYXR0cnMsXG4gICAgICAgIGJsb2NrLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlYWNoYWJsZSAke0pTT04uc3RyaW5naWZ5KHN0YXRlbWVudCl9IGluIG5vcm1hbGl6ZVN1Z2FyeUFycmF5U3RhdGVtZW50YCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVmVyYm9zZVN0YXRlbWVudChzdGF0ZW1lbnQ6IFZlcmJvc2VTdGF0ZW1lbnQpOiBOb3JtYWxpemVkU3RhdGVtZW50IHtcbiAgc3dpdGNoIChzdGF0ZW1lbnRbMF0pIHtcbiAgICBjYXNlIEJ1aWxkZXIuTGl0ZXJhbDoge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2luZDogSGVhZEtpbmQuTGl0ZXJhbCxcbiAgICAgICAgdmFsdWU6IHN0YXRlbWVudFsxXSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY2FzZSBCdWlsZGVyLkFwcGVuZDoge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZUFwcGVuZEV4cHJlc3Npb24oc3RhdGVtZW50WzFdLCBzdGF0ZW1lbnRbMl0pO1xuICAgIH1cblxuICAgIGNhc2UgQnVpbGRlci5Nb2RpZmllcjoge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2luZDogSGVhZEtpbmQuTW9kaWZpZXIsXG4gICAgICAgIHBhcmFtczogbm9ybWFsaXplUGFyYW1zKHN0YXRlbWVudFsxXSksXG4gICAgICAgIGhhc2g6IG5vcm1hbGl6ZUhhc2goc3RhdGVtZW50WzJdKSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY2FzZSBCdWlsZGVyLkR5bmFtaWNDb21wb25lbnQ6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6IEhlYWRLaW5kLkR5bmFtaWNDb21wb25lbnQsXG4gICAgICAgIGV4cHI6IG5vcm1hbGl6ZUV4cHJlc3Npb24oc3RhdGVtZW50WzFdKSxcbiAgICAgICAgaGFzaDogbm9ybWFsaXplSGFzaChzdGF0ZW1lbnRbMl0pLFxuICAgICAgICBibG9jazogbm9ybWFsaXplQmxvY2soc3RhdGVtZW50WzNdKSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY2FzZSBCdWlsZGVyLkNvbW1lbnQ6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6IEhlYWRLaW5kLkNvbW1lbnQsXG4gICAgICAgIHZhbHVlOiBzdGF0ZW1lbnRbMV0sXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0QmxvY2tIZWFkKG5hbWU6IHN0cmluZyk6IE5vcm1hbGl6ZWRIZWFkIHtcbiAgbGV0IHJlc3VsdCA9IC9eKCN8ISkoLiopJC8uZXhlYyhuYW1lKTtcblxuICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIG1pc3NpbmcgIyBpbiBibG9jayBoZWFkYCk7XG4gIH1cblxuICByZXR1cm4gbm9ybWFsaXplRG90dGVkUGF0aChyZXN1bHRbMl0pO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVDYWxsSGVhZChuYW1lOiBzdHJpbmcpOiBOb3JtYWxpemVkSGVhZCB7XG4gIGxldCByZXN1bHQgPSAvXlxcKCguKilcXCkkLy5leGVjKG5hbWUpO1xuXG4gIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgbWlzc2luZyAoKSBpbiBjYWxsIGhlYWRgKTtcbiAgfVxuXG4gIHJldHVybiBub3JtYWxpemVEb3R0ZWRQYXRoKHJlc3VsdFsxXSk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVBhdGgoaGVhZDogc3RyaW5nLCB0YWlsOiBzdHJpbmdbXSA9IFtdKTogTm9ybWFsaXplZEhlYWQge1xuICBsZXQgcGF0aEhlYWQgPSBub3JtYWxpemVQYXRoSGVhZChoZWFkKTtcblxuICBpZiAoaXNQcmVzZW50KHRhaWwpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IEV4cHJlc3Npb25LaW5kLkdldFBhdGgsXG4gICAgICBwYXRoOiB7XG4gICAgICAgIGhlYWQ6IHBhdGhIZWFkLFxuICAgICAgICB0YWlsLFxuICAgICAgfSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBFeHByZXNzaW9uS2luZC5HZXRWYXIsXG4gICAgICB2YXJpYWJsZTogcGF0aEhlYWQsXG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVEb3R0ZWRQYXRoKHdob2xlOiBzdHJpbmcpOiBOb3JtYWxpemVkSGVhZCB7XG4gIGxldCB7IGtpbmQsIG5hbWU6IHJlc3QgfSA9IG5vcm1hbGl6ZVBhdGhIZWFkKHdob2xlKTtcblxuICBsZXQgW25hbWUsIC4uLnRhaWxdID0gcmVzdC5zcGxpdCgnLicpO1xuXG4gIGxldCB2YXJpYWJsZTogVmFyaWFibGUgPSB7IGtpbmQsIG5hbWUsIG1vZGU6ICdsb29zZScgfTtcblxuICBpZiAoaXNQcmVzZW50KHRhaWwpKSB7XG4gICAgcmV0dXJuIHsgdHlwZTogRXhwcmVzc2lvbktpbmQuR2V0UGF0aCwgcGF0aDogeyBoZWFkOiB2YXJpYWJsZSwgdGFpbCB9IH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgdHlwZTogRXhwcmVzc2lvbktpbmQuR2V0VmFyLCB2YXJpYWJsZSB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVQYXRoSGVhZCh3aG9sZTogc3RyaW5nKTogVmFyaWFibGUge1xuICBsZXQga2luZDogVmFyaWFibGVLaW5kO1xuICBsZXQgbmFtZTogc3RyaW5nO1xuXG4gIGlmICgvXnRoaXMoXFwufCQpLy5leGVjKHdob2xlKSkge1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBWYXJpYWJsZUtpbmQuVGhpcyxcbiAgICAgIG5hbWU6IHdob2xlLFxuICAgICAgbW9kZTogJ2xvb3NlJyxcbiAgICB9O1xuICB9XG5cbiAgc3dpdGNoICh3aG9sZVswXSkge1xuICAgIGNhc2UgJ14nOlxuICAgICAga2luZCA9IFZhcmlhYmxlS2luZC5GcmVlO1xuICAgICAgbmFtZSA9IHdob2xlLnNsaWNlKDEpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdAJzpcbiAgICAgIGtpbmQgPSBWYXJpYWJsZUtpbmQuQXJnO1xuICAgICAgbmFtZSA9IHdob2xlLnNsaWNlKDEpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICcmJzpcbiAgICAgIGtpbmQgPSBWYXJpYWJsZUtpbmQuQmxvY2s7XG4gICAgICBuYW1lID0gd2hvbGUuc2xpY2UoMSk7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBraW5kID0gVmFyaWFibGVLaW5kLkxvY2FsO1xuICAgICAgbmFtZSA9IHdob2xlO1xuICB9XG5cbiAgcmV0dXJuIHsga2luZCwgbmFtZSwgbW9kZTogJ2xvb3NlJyB9O1xufVxuXG5leHBvcnQgdHlwZSBCdWlsZGVyQmxvY2tTdGF0ZW1lbnQgPVxuICB8IFtzdHJpbmcsIEJ1aWxkZXJCbG9jayB8IEJ1aWxkZXJCbG9ja3NdXG4gIHwgW3N0cmluZywgQnVpbGRlclBhcmFtcyB8IEJ1aWxkZXJCbG9ja0hhc2gsIEJ1aWxkZXJCbG9jayB8IEJ1aWxkZXJCbG9ja3NdXG4gIHwgW3N0cmluZywgQnVpbGRlclBhcmFtcywgQnVpbGRlckJsb2NrSGFzaCwgQnVpbGRlckJsb2NrIHwgQnVpbGRlckJsb2Nrc107XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9ybWFsaXplZEJ1aWxkZXJCbG9ja1N0YXRlbWVudCB7XG4gIGhlYWQ6IE5vcm1hbGl6ZWRIZWFkO1xuICBwYXJhbXM6IE9wdGlvbjxOb3JtYWxpemVkUGFyYW1zPjtcbiAgaGFzaDogT3B0aW9uPE5vcm1hbGl6ZWRIYXNoPjtcbiAgYmxvY2tQYXJhbXM6IE9wdGlvbjxzdHJpbmdbXT47XG4gIGJsb2NrczogTm9ybWFsaXplZEJsb2Nrcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUJ1aWxkZXJCbG9ja1N0YXRlbWVudChcbiAgc3RhdGVtZW50OiBCdWlsZGVyQmxvY2tTdGF0ZW1lbnRcbik6IE5vcm1hbGl6ZWRCdWlsZGVyQmxvY2tTdGF0ZW1lbnQge1xuICBsZXQgaGVhZCA9IHN0YXRlbWVudFswXTtcbiAgbGV0IGJsb2NrczogTm9ybWFsaXplZEJsb2NrcyA9IGRpY3QoKTtcbiAgbGV0IHBhcmFtczogT3B0aW9uPE5vcm1hbGl6ZWRQYXJhbXM+ID0gbnVsbDtcbiAgbGV0IGhhc2g6IE9wdGlvbjxOb3JtYWxpemVkSGFzaD4gPSBudWxsO1xuICBsZXQgYmxvY2tQYXJhbXM6IE9wdGlvbjxzdHJpbmdbXT4gPSBudWxsO1xuXG4gIGlmIChzdGF0ZW1lbnQubGVuZ3RoID09PSAyKSB7XG4gICAgYmxvY2tzID0gbm9ybWFsaXplQmxvY2tzKHN0YXRlbWVudFsxXSk7XG4gIH0gZWxzZSBpZiAoc3RhdGVtZW50Lmxlbmd0aCA9PT0gMykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN0YXRlbWVudFsxXSkpIHtcbiAgICAgIHBhcmFtcyA9IG5vcm1hbGl6ZVBhcmFtcyhzdGF0ZW1lbnRbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAoeyBoYXNoLCBibG9ja1BhcmFtcyB9ID0gbm9ybWFsaXplQmxvY2tIYXNoKHN0YXRlbWVudFsxXSkpO1xuICAgIH1cblxuICAgIGJsb2NrcyA9IG5vcm1hbGl6ZUJsb2NrcyhzdGF0ZW1lbnRbMl0pO1xuICB9IGVsc2UgaWYgKHN0YXRlbWVudC5sZW5ndGggPT09IDQpIHtcbiAgICBwYXJhbXMgPSBub3JtYWxpemVQYXJhbXMoc3RhdGVtZW50WzFdKTtcbiAgICAoeyBoYXNoLCBibG9ja1BhcmFtcyB9ID0gbm9ybWFsaXplQmxvY2tIYXNoKHN0YXRlbWVudFsyXSkpO1xuICAgIGJsb2NrcyA9IG5vcm1hbGl6ZUJsb2NrcyhzdGF0ZW1lbnRbM10pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBoZWFkOiBleHRyYWN0QmxvY2tIZWFkKGhlYWQpLFxuICAgIHBhcmFtcyxcbiAgICBoYXNoLFxuICAgIGJsb2NrUGFyYW1zLFxuICAgIGJsb2NrcyxcbiAgfTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQmxvY2tIYXNoKFxuICBoYXNoOiBCdWlsZGVyQmxvY2tIYXNoXG4pOiB7IGhhc2g6IE9wdGlvbjxOb3JtYWxpemVkSGFzaD47IGJsb2NrUGFyYW1zOiBPcHRpb248c3RyaW5nW10+IH0ge1xuICBpZiAoaGFzaCA9PT0gbnVsbCkge1xuICAgIHJldHVybiB7IGhhc2g6IG51bGwsIGJsb2NrUGFyYW1zOiBudWxsIH07XG4gIH1cblxuICBsZXQgb3V0OiBPcHRpb248RGljdDxOb3JtYWxpemVkRXhwcmVzc2lvbj4+ID0gbnVsbDtcbiAgbGV0IGJsb2NrUGFyYW1zOiBPcHRpb248c3RyaW5nW10+ID0gbnVsbDtcblxuICBlbnRyaWVzKGhhc2gsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgaWYgKGtleSA9PT0gJ2FzJykge1xuICAgICAgYmxvY2tQYXJhbXMgPSBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0ID0gb3V0IHx8IGRpY3QoKTtcbiAgICAgIG91dFtrZXldID0gbm9ybWFsaXplRXhwcmVzc2lvbih2YWx1ZSBhcyBCdWlsZGVyRXhwcmVzc2lvbik7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4geyBoYXNoOiBvdXQsIGJsb2NrUGFyYW1zIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbnRyaWVzPEQgZXh0ZW5kcyBEaWN0PihcbiAgZGljdDogRCxcbiAgY2FsbGJhY2s6IDxLIGV4dGVuZHMga2V5b2YgRD4oa2V5OiBLLCB2YWx1ZTogRFtLXSkgPT4gdm9pZFxuKTogdm9pZCB7XG4gIE9iamVjdC5rZXlzKGRpY3QpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGxldCB2YWx1ZSA9IGRpY3Rba2V5XTtcbiAgICBjYWxsYmFjayhrZXksIHZhbHVlIGFzIERba2V5b2YgRF0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQmxvY2tzKHZhbHVlOiBCdWlsZGVyQmxvY2sgfCBCdWlsZGVyQmxvY2tzKTogTm9ybWFsaXplZEJsb2NrcyB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB7IGRlZmF1bHQ6IG5vcm1hbGl6ZUJsb2NrKHZhbHVlKSB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBtYXBPYmplY3QodmFsdWUsIG5vcm1hbGl6ZUJsb2NrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVCbG9jayhibG9jazogQnVpbGRlckJsb2NrKTogTm9ybWFsaXplZEJsb2NrIHtcbiAgcmV0dXJuIGJsb2NrLm1hcCgocykgPT4gbm9ybWFsaXplU3RhdGVtZW50KHMpKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplQXR0cnMoYXR0cnM6IEJ1aWxkZXJBdHRycyk6IE5vcm1hbGl6ZWRBdHRycyB7XG4gIHJldHVybiBtYXBPYmplY3QoYXR0cnMsIChhKSA9PiBub3JtYWxpemVBdHRyKGEpLmV4cHIpO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVBdHRyKGF0dHI6IEJ1aWxkZXJBdHRyKTogeyBleHByOiBOb3JtYWxpemVkQXR0cjsgdHJ1c3RlZDogYm9vbGVhbiB9IHtcbiAgaWYgKGF0dHIgPT09ICdzcGxhdCcpIHtcbiAgICByZXR1cm4geyBleHByOiBIZWFkS2luZC5TcGxhdCwgdHJ1c3RlZDogZmFsc2UgfTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgZXhwciA9IG5vcm1hbGl6ZUV4cHJlc3Npb24oYXR0cik7XG4gICAgcmV0dXJuIHsgZXhwciwgdHJ1c3RlZDogZmFsc2UgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBPYmplY3Q8VCBleHRlbmRzIERpY3Q8dW5rbm93bj4sIE91dD4oXG4gIG9iamVjdDogVCxcbiAgY2FsbGJhY2s6ICh2YWx1ZTogRGljdFZhbHVlPFQ+LCBrZXk6IGtleW9mIFQpID0+IE91dFxuKTogeyBbUCBpbiBrZXlvZiBUXTogT3V0IH0ge1xuICBsZXQgb3V0ID0gZGljdCgpIGFzIHsgW1AgaW4ga2V5b2YgVF0/OiBPdXQgfTtcblxuICBPYmplY3Qua2V5cyhvYmplY3QpLmZvckVhY2goPEsgZXh0ZW5kcyBrZXlvZiBUPihrOiBLKSA9PiB7XG4gICAgb3V0W2tdID0gY2FsbGJhY2sob2JqZWN0W2tdIGFzIERpY3RWYWx1ZTxUPiwgayk7XG4gIH0pO1xuXG4gIHJldHVybiBvdXQgYXMgeyBbUCBpbiBrZXlvZiBUXTogT3V0IH07XG59XG5cbmV4cG9ydCB0eXBlIEJ1aWxkZXJFbGVtZW50ID1cbiAgfCBbc3RyaW5nXVxuICB8IFtzdHJpbmcsIEJ1aWxkZXJBdHRycywgQnVpbGRlckJsb2NrXVxuICB8IFtzdHJpbmcsIEJ1aWxkZXJCbG9ja11cbiAgfCBbc3RyaW5nLCBCdWlsZGVyQXR0cnNdO1xuXG5leHBvcnQgdHlwZSBCdWlsZGVyQ29tbWVudCA9IFtCdWlsZGVyLkNvbW1lbnQsIHN0cmluZ107XG5cbmV4cG9ydCB0eXBlIEludm9jYXRpb25FbGVtZW50ID1cbiAgfCBbc3RyaW5nXVxuICB8IFtzdHJpbmcsIEJ1aWxkZXJBdHRycywgQnVpbGRlckJsb2NrXVxuICB8IFtzdHJpbmcsIEJ1aWxkZXJCbG9ja11cbiAgfCBbc3RyaW5nLCBCdWlsZGVyQXR0cnNdO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50KGlucHV0OiBbc3RyaW5nLCAuLi51bmtub3duW11dKTogaW5wdXQgaXMgQnVpbGRlckVsZW1lbnQge1xuICBsZXQgbWF0Y2ggPSAvXjwoW2EtejAtOVxcLV1bYS16QS1aMC05XFwtXSopPiQvLmV4ZWMoaW5wdXRbMF0pO1xuXG4gIHJldHVybiAhIW1hdGNoICYmICEhbWF0Y2hbMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RWxlbWVudChpbnB1dDogc3RyaW5nKTogT3B0aW9uPHN0cmluZz4ge1xuICBsZXQgbWF0Y2ggPSAvXjwoW2EtejAtOVxcLV1bYS16QS1aMC05XFwtXSopPiQvLmV4ZWMoaW5wdXQpO1xuXG4gIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RBbmdsZUludm9jYXRpb24oaW5wdXQ6IHN0cmluZyk6IE9wdGlvbjxzdHJpbmc+IHtcbiAgbGV0IG1hdGNoID0gL148KEBbYS16QS1aMC05XSp8W0EtWl1bYS16QS1aMC05XFwtXSopPiQvLmV4ZWMoaW5wdXRbMF0pO1xuXG4gIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQW5nbGVJbnZvY2F0aW9uKGlucHV0OiBbc3RyaW5nLCAuLi51bmtub3duW11dKTogaW5wdXQgaXMgSW52b2NhdGlvbkVsZW1lbnQge1xuICAvLyBUT0RPIFBhdGhzXG4gIGxldCBtYXRjaCA9IC9ePChAW2EtekEtWjAtOV0qfFtBLVpdW2EtekEtWjAtOVxcLV0qKT4kLy5leGVjKGlucHV0WzBdKTtcblxuICByZXR1cm4gISFtYXRjaCAmJiAhIW1hdGNoWzFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCbG9jayhpbnB1dDogW3N0cmluZywgLi4udW5rbm93bltdXSk6IGlucHV0IGlzIEJ1aWxkZXJCbG9ja1N0YXRlbWVudCB7XG4gIC8vIFRPRE8gUGF0aHNcbiAgbGV0IG1hdGNoID0gL14jW15dPyhbYS16QS1aMC05XSp8W0EtWl1bYS16QS1aMC05XFwtXSopJC8uZXhlYyhpbnB1dFswXSk7XG5cbiAgcmV0dXJuICEhbWF0Y2ggJiYgISFtYXRjaFsxXTtcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gQnVpbGRlciB7XG4gIExpdGVyYWwsXG4gIENvbW1lbnQsXG4gIEFwcGVuZCxcbiAgTW9kaWZpZXIsXG4gIER5bmFtaWNDb21wb25lbnQsXG4gIEdldCxcbiAgQ29uY2F0LFxuICBIYXNCbG9jayxcbiAgSGFzQmxvY2tQYXJhbXMsXG59XG5cbmV4cG9ydCB0eXBlIFZlcmJvc2VTdGF0ZW1lbnQgPVxuICB8IFtCdWlsZGVyLkxpdGVyYWwsIHN0cmluZ11cbiAgfCBbQnVpbGRlci5Db21tZW50LCBzdHJpbmddXG4gIHwgW0J1aWxkZXIuQXBwZW5kLCBCdWlsZGVyRXhwcmVzc2lvbiwgdHJ1ZV1cbiAgfCBbQnVpbGRlci5BcHBlbmQsIEJ1aWxkZXJFeHByZXNzaW9uXVxuICB8IFtCdWlsZGVyLk1vZGlmaWVyLCBQYXJhbXMsIEhhc2hdXG4gIHwgW0J1aWxkZXIuRHluYW1pY0NvbXBvbmVudCwgQnVpbGRlckV4cHJlc3Npb24sIEhhc2gsIEJ1aWxkZXJCbG9ja107XG5cbmV4cG9ydCB0eXBlIEJ1aWxkZXJTdGF0ZW1lbnQgPVxuICB8IFZlcmJvc2VTdGF0ZW1lbnRcbiAgfCBTdWdhcnlBcnJheVN0YXRlbWVudFxuICB8IFR1cGxlQnVpbGRlckV4cHJlc3Npb25cbiAgfCBzdHJpbmc7XG5cbmV4cG9ydCB0eXBlIEJ1aWxkZXJBdHRyID0gJ3NwbGF0JyB8IEJ1aWxkZXJFeHByZXNzaW9uO1xuXG5leHBvcnQgdHlwZSBUdXBsZUJ1aWxkZXJFeHByZXNzaW9uID1cbiAgfCBbQnVpbGRlci5MaXRlcmFsLCBzdHJpbmcgfCBib29sZWFuIHwgbnVsbCB8IHVuZGVmaW5lZF1cbiAgfCBbQnVpbGRlci5HZXQsIHN0cmluZ11cbiAgfCBbQnVpbGRlci5HZXQsIHN0cmluZywgc3RyaW5nW11dXG4gIHwgW0J1aWxkZXIuQ29uY2F0LCAuLi5CdWlsZGVyRXhwcmVzc2lvbltdXVxuICB8IFtCdWlsZGVyLkhhc0Jsb2NrLCBzdHJpbmddXG4gIHwgW0J1aWxkZXIuSGFzQmxvY2tQYXJhbXMsIHN0cmluZ11cbiAgfCBCdWlsZGVyQ2FsbEV4cHJlc3Npb247XG5cbnR5cGUgUGFyYW1zID0gQnVpbGRlclBhcmFtcztcbnR5cGUgSGFzaCA9IERpY3Q8QnVpbGRlckV4cHJlc3Npb24+O1xuXG5leHBvcnQgY29uc3QgZW51bSBFeHByZXNzaW9uS2luZCB7XG4gIExpdGVyYWwgPSAnTGl0ZXJhbCcsXG4gIENhbGwgPSAnQ2FsbCcsXG4gIEdldFBhdGggPSAnR2V0UGF0aCcsXG4gIEdldFZhciA9ICdHZXRWYXInLFxuICBDb25jYXQgPSAnQ29uY2F0JyxcbiAgSGFzQmxvY2sgPSAnSGFzQmxvY2snLFxuICBIYXNCbG9ja1BhcmFtcyA9ICdIYXNCbG9ja1BhcmFtcycsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9ybWFsaXplZENhbGxFeHByZXNzaW9uIHtcbiAgdHlwZTogRXhwcmVzc2lvbktpbmQuQ2FsbDtcbiAgaGVhZDogTm9ybWFsaXplZEhlYWQ7XG4gIHBhcmFtczogT3B0aW9uPE5vcm1hbGl6ZWRQYXJhbXM+O1xuICBoYXNoOiBPcHRpb248Tm9ybWFsaXplZEhhc2g+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vcm1hbGl6ZWRQYXRoIHtcbiAgdHlwZTogRXhwcmVzc2lvbktpbmQuR2V0UGF0aDtcbiAgcGF0aDogUGF0aDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOb3JtYWxpemVkVmFyIHtcbiAgdHlwZTogRXhwcmVzc2lvbktpbmQuR2V0VmFyO1xuICB2YXJpYWJsZTogVmFyaWFibGU7XG59XG5cbmV4cG9ydCB0eXBlIE5vcm1hbGl6ZWRIZWFkID0gTm9ybWFsaXplZFBhdGggfCBOb3JtYWxpemVkVmFyO1xuXG5leHBvcnQgaW50ZXJmYWNlIE5vcm1hbGl6ZWRDb25jYXQge1xuICB0eXBlOiBFeHByZXNzaW9uS2luZC5Db25jYXQ7XG4gIHBhcmFtczogW05vcm1hbGl6ZWRFeHByZXNzaW9uLCAuLi5Ob3JtYWxpemVkRXhwcmVzc2lvbltdXTtcbn1cblxuZXhwb3J0IHR5cGUgTm9ybWFsaXplZEV4cHJlc3Npb24gPVxuICB8IHtcbiAgICAgIHR5cGU6IEV4cHJlc3Npb25LaW5kLkxpdGVyYWw7XG4gICAgICB2YWx1ZTogbnVsbCB8IHVuZGVmaW5lZCB8IGJvb2xlYW4gfCBzdHJpbmcgfCBudW1iZXI7XG4gICAgfVxuICB8IE5vcm1hbGl6ZWRDYWxsRXhwcmVzc2lvblxuICB8IE5vcm1hbGl6ZWRQYXRoXG4gIHwgTm9ybWFsaXplZFZhclxuICB8IE5vcm1hbGl6ZWRDb25jYXRcbiAgfCB7XG4gICAgICB0eXBlOiBFeHByZXNzaW9uS2luZC5IYXNCbG9jaztcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogRXhwcmVzc2lvbktpbmQuSGFzQmxvY2tQYXJhbXM7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUFwcGVuZEV4cHJlc3Npb24oXG4gIGV4cHJlc3Npb246IEJ1aWxkZXJFeHByZXNzaW9uLFxuICBmb3JjZVRydXN0ZWQgPSBmYWxzZVxuKTogQXBwZW5kRXhwciB8IEFwcGVuZFBhdGgge1xuICBpZiAoZXhwcmVzc2lvbiA9PT0gbnVsbCB8fCBleHByZXNzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXhwcjoge1xuICAgICAgICB0eXBlOiBFeHByZXNzaW9uS2luZC5MaXRlcmFsLFxuICAgICAgICB2YWx1ZTogZXhwcmVzc2lvbixcbiAgICAgIH0sXG4gICAgICBraW5kOiBIZWFkS2luZC5BcHBlbmRFeHByLFxuICAgICAgdHJ1c3RlZDogZmFsc2UsXG4gICAgfTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGV4cHJlc3Npb24pKSB7XG4gICAgc3dpdGNoIChleHByZXNzaW9uWzBdKSB7XG4gICAgICBjYXNlIEJ1aWxkZXIuTGl0ZXJhbDpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBleHByOiB7IHR5cGU6IEV4cHJlc3Npb25LaW5kLkxpdGVyYWwsIHZhbHVlOiBleHByZXNzaW9uWzFdIH0sXG4gICAgICAgICAga2luZDogSGVhZEtpbmQuQXBwZW5kRXhwcixcbiAgICAgICAgICB0cnVzdGVkOiBmYWxzZSxcbiAgICAgICAgfTtcblxuICAgICAgY2FzZSBCdWlsZGVyLkdldDoge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplQXBwZW5kSGVhZChub3JtYWxpemVQYXRoKGV4cHJlc3Npb25bMV0sIGV4cHJlc3Npb25bMl0pLCBmb3JjZVRydXN0ZWQpO1xuICAgICAgfVxuICAgICAgY2FzZSBCdWlsZGVyLkNvbmNhdDoge1xuICAgICAgICBsZXQgZXhwcjogTm9ybWFsaXplZENvbmNhdCA9IHtcbiAgICAgICAgICB0eXBlOiBFeHByZXNzaW9uS2luZC5Db25jYXQsXG4gICAgICAgICAgcGFyYW1zOiBub3JtYWxpemVQYXJhbXMoZXhwcmVzc2lvbi5zbGljZSgxKSkgYXMgW1xuICAgICAgICAgICAgTm9ybWFsaXplZEV4cHJlc3Npb24sXG4gICAgICAgICAgICAuLi5Ob3JtYWxpemVkRXhwcmVzc2lvbltdXG4gICAgICAgICAgXSxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGV4cHIsXG4gICAgICAgICAga2luZDogSGVhZEtpbmQuQXBwZW5kRXhwcixcbiAgICAgICAgICB0cnVzdGVkOiBmb3JjZVRydXN0ZWQsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNhc2UgQnVpbGRlci5IYXNCbG9jazpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBleHByOiB7XG4gICAgICAgICAgICB0eXBlOiBFeHByZXNzaW9uS2luZC5IYXNCbG9jayxcbiAgICAgICAgICAgIG5hbWU6IGV4cHJlc3Npb25bMV0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBraW5kOiBIZWFkS2luZC5BcHBlbmRFeHByLFxuICAgICAgICAgIHRydXN0ZWQ6IGZvcmNlVHJ1c3RlZCxcbiAgICAgICAgfTtcblxuICAgICAgY2FzZSBCdWlsZGVyLkhhc0Jsb2NrUGFyYW1zOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGV4cHI6IHtcbiAgICAgICAgICAgIHR5cGU6IEV4cHJlc3Npb25LaW5kLkhhc0Jsb2NrUGFyYW1zLFxuICAgICAgICAgICAgbmFtZTogZXhwcmVzc2lvblsxXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGtpbmQ6IEhlYWRLaW5kLkFwcGVuZEV4cHIsXG4gICAgICAgICAgdHJ1c3RlZDogZm9yY2VUcnVzdGVkLFxuICAgICAgICB9O1xuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGlmIChpc0J1aWxkZXJDYWxsRXhwcmVzc2lvbihleHByZXNzaW9uKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBleHByOiBub3JtYWxpemVDYWxsRXhwcmVzc2lvbihleHByZXNzaW9uKSxcbiAgICAgICAgICAgIGtpbmQ6IEhlYWRLaW5kLkFwcGVuZEV4cHIsXG4gICAgICAgICAgICB0cnVzdGVkOiBmb3JjZVRydXN0ZWQsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgVW5leHBlY3RlZCBhcnJheSBpbiBleHByZXNzaW9uIHBvc2l0aW9uICh3YXNuJ3QgYSB0dXBsZSBleHByZXNzaW9uIGFuZCAke1xuICAgICAgICAgICAgICBleHByZXNzaW9uWzBdIGFzIHN0cmluZ1xuICAgICAgICAgICAgfSBpc24ndCB3cmFwcGVkIGluIHBhcmVucywgc28gaXQgaXNuJ3QgYSBjYWxsKTogJHtKU09OLnN0cmluZ2lmeShleHByZXNzaW9uKX1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQnVpbGRlckNhbGxFeHByZXNzaW9uXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHByZXNzaW9uICE9PSAnb2JqZWN0Jykge1xuICAgIHN3aXRjaCAodHlwZW9mIGV4cHJlc3Npb24pIHtcbiAgICAgIGNhc2UgJ3N0cmluZyc6IHtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZUFwcGVuZEhlYWQobm9ybWFsaXplRG90dGVkUGF0aChleHByZXNzaW9uKSwgZm9yY2VUcnVzdGVkKTtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBleHByOiB7IHR5cGU6IEV4cHJlc3Npb25LaW5kLkxpdGVyYWwsIHZhbHVlOiBleHByZXNzaW9uIH0sXG4gICAgICAgICAga2luZDogSGVhZEtpbmQuQXBwZW5kRXhwcixcbiAgICAgICAgICB0cnVzdGVkOiB0cnVlLFxuICAgICAgICB9O1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBhc3NlcnROZXZlcihleHByZXNzaW9uKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgYXNzZXJ0TmV2ZXIoZXhwcmVzc2lvbik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUV4cHJlc3Npb24oZXhwcmVzc2lvbjogQnVpbGRlckV4cHJlc3Npb24pOiBOb3JtYWxpemVkRXhwcmVzc2lvbiB7XG4gIGlmIChleHByZXNzaW9uID09PSBudWxsIHx8IGV4cHJlc3Npb24gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBFeHByZXNzaW9uS2luZC5MaXRlcmFsLFxuICAgICAgdmFsdWU6IGV4cHJlc3Npb24sXG4gICAgfTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGV4cHJlc3Npb24pKSB7XG4gICAgc3dpdGNoIChleHByZXNzaW9uWzBdKSB7XG4gICAgICBjYXNlIEJ1aWxkZXIuTGl0ZXJhbDpcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogRXhwcmVzc2lvbktpbmQuTGl0ZXJhbCwgdmFsdWU6IGV4cHJlc3Npb25bMV0gfTtcblxuICAgICAgY2FzZSBCdWlsZGVyLkdldDoge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplUGF0aChleHByZXNzaW9uWzFdLCBleHByZXNzaW9uWzJdKTtcbiAgICAgIH1cbiAgICAgIGNhc2UgQnVpbGRlci5Db25jYXQ6IHtcbiAgICAgICAgbGV0IGV4cHI6IE5vcm1hbGl6ZWRDb25jYXQgPSB7XG4gICAgICAgICAgdHlwZTogRXhwcmVzc2lvbktpbmQuQ29uY2F0LFxuICAgICAgICAgIHBhcmFtczogbm9ybWFsaXplUGFyYW1zKGV4cHJlc3Npb24uc2xpY2UoMSkpIGFzIFtcbiAgICAgICAgICAgIE5vcm1hbGl6ZWRFeHByZXNzaW9uLFxuICAgICAgICAgICAgLi4uTm9ybWFsaXplZEV4cHJlc3Npb25bXVxuICAgICAgICAgIF0sXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGV4cHI7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgQnVpbGRlci5IYXNCbG9jazpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiBFeHByZXNzaW9uS2luZC5IYXNCbG9jayxcbiAgICAgICAgICBuYW1lOiBleHByZXNzaW9uWzFdLFxuICAgICAgICB9O1xuXG4gICAgICBjYXNlIEJ1aWxkZXIuSGFzQmxvY2tQYXJhbXM6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogRXhwcmVzc2lvbktpbmQuSGFzQmxvY2tQYXJhbXMsXG4gICAgICAgICAgbmFtZTogZXhwcmVzc2lvblsxXSxcbiAgICAgICAgfTtcblxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBpZiAoaXNCdWlsZGVyQ2FsbEV4cHJlc3Npb24oZXhwcmVzc2lvbikpIHtcbiAgICAgICAgICByZXR1cm4gbm9ybWFsaXplQ2FsbEV4cHJlc3Npb24oZXhwcmVzc2lvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYFVuZXhwZWN0ZWQgYXJyYXkgaW4gZXhwcmVzc2lvbiBwb3NpdGlvbiAod2Fzbid0IGEgdHVwbGUgZXhwcmVzc2lvbiBhbmQgJHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvblswXSBhcyBzdHJpbmdcbiAgICAgICAgICAgIH0gaXNuJ3Qgd3JhcHBlZCBpbiBwYXJlbnMsIHNvIGl0IGlzbid0IGEgY2FsbCk6ICR7SlNPTi5zdHJpbmdpZnkoZXhwcmVzc2lvbil9YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEJ1aWxkZXJDYWxsRXhwcmVzc2lvblxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwcmVzc2lvbiAhPT0gJ29iamVjdCcpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBleHByZXNzaW9uKSB7XG4gICAgICBjYXNlICdzdHJpbmcnOiB7XG4gICAgICAgIHJldHVybiBub3JtYWxpemVEb3R0ZWRQYXRoKGV4cHJlc3Npb24pO1xuICAgICAgfVxuICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICByZXR1cm4geyB0eXBlOiBFeHByZXNzaW9uS2luZC5MaXRlcmFsLCB2YWx1ZTogZXhwcmVzc2lvbiB9O1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBhc3NlcnROZXZlcihleHByZXNzaW9uKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgYXNzZXJ0TmV2ZXIoZXhwcmVzc2lvbik7XG4gIH1cbn1cblxuLy8gfCBbQnVpbGRlci5HZXQsIHN0cmluZ11cbi8vIHwgW0J1aWxkZXIuR2V0LCBzdHJpbmcsIHN0cmluZ1tdXVxuLy8gfCBbQnVpbGRlci5Db25jYXQsIFBhcmFtc11cbi8vIHwgW0J1aWxkZXIuSGFzQmxvY2ssIHN0cmluZ11cbi8vIHwgW0J1aWxkZXIuSGFzQmxvY2tQYXJhbXMsIHN0cmluZ11cblxuZXhwb3J0IHR5cGUgQnVpbGRlckV4cHJlc3Npb24gPVxuICB8IFR1cGxlQnVpbGRlckV4cHJlc3Npb25cbiAgfCBCdWlsZGVyQ2FsbEV4cHJlc3Npb25cbiAgfCBudWxsXG4gIHwgdW5kZWZpbmVkXG4gIHwgYm9vbGVhblxuICB8IHN0cmluZ1xuICB8IG51bWJlcjtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQnVpbGRlckV4cHJlc3Npb24oXG4gIGV4cHI6IEJ1aWxkZXJFeHByZXNzaW9uIHwgQnVpbGRlckNhbGxFeHByZXNzaW9uXG4pOiBleHByIGlzIFR1cGxlQnVpbGRlckV4cHJlc3Npb24gfCBCdWlsZGVyQ2FsbEV4cHJlc3Npb24ge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShleHByKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTGl0ZXJhbChcbiAgZXhwcjogQnVpbGRlckV4cHJlc3Npb24gfCBCdWlsZGVyQ2FsbEV4cHJlc3Npb25cbik6IGV4cHIgaXMgW0J1aWxkZXIuTGl0ZXJhbCwgc3RyaW5nIHwgYm9vbGVhbiB8IHVuZGVmaW5lZF0ge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShleHByKSAmJiBleHByWzBdID09PSAnbGl0ZXJhbCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGF0ZW1lbnRJc0V4cHJlc3Npb24oXG4gIHN0YXRlbWVudDogQnVpbGRlclN0YXRlbWVudFxuKTogc3RhdGVtZW50IGlzIFR1cGxlQnVpbGRlckV4cHJlc3Npb24ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoc3RhdGVtZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGxldCBuYW1lID0gc3RhdGVtZW50WzBdO1xuXG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gJ251bWJlcicpIHtcbiAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgIGNhc2UgQnVpbGRlci5MaXRlcmFsOlxuICAgICAgY2FzZSBCdWlsZGVyLkdldDpcbiAgICAgIGNhc2UgQnVpbGRlci5Db25jYXQ6XG4gICAgICBjYXNlIEJ1aWxkZXIuSGFzQmxvY2s6XG4gICAgICBjYXNlIEJ1aWxkZXIuSGFzQmxvY2tQYXJhbXM6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChuYW1lWzBdID09PSAnKCcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQnVpbGRlckNhbGxFeHByZXNzaW9uKFxuICB2YWx1ZTogVHVwbGVCdWlsZGVyRXhwcmVzc2lvbiB8IEJ1aWxkZXJDYWxsRXhwcmVzc2lvblxuKTogdmFsdWUgaXMgQnVpbGRlckNhbGxFeHByZXNzaW9uIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZVswXSA9PT0gJ3N0cmluZycgJiYgdmFsdWVbMF1bMF0gPT09ICcoJztcbn1cblxuZXhwb3J0IHR5cGUgTWluaUJ1aWxkZXJCbG9jayA9IEJ1aWxkZXJTdGF0ZW1lbnRbXTtcblxuZXhwb3J0IHR5cGUgQnVpbGRlckJsb2NrID0gTWluaUJ1aWxkZXJCbG9jaztcblxuZXhwb3J0IHR5cGUgQnVpbGRlckNhbGxFeHByZXNzaW9uID0gW3N0cmluZ10gfCBbc3RyaW5nLCBQYXJhbXMgfCBIYXNoXSB8IFtzdHJpbmcsIFBhcmFtcywgSGFzaF07XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVQYXJhbXMoaW5wdXQ6IFBhcmFtcyk6IE5vcm1hbGl6ZWRQYXJhbXMge1xuICByZXR1cm4gaW5wdXQubWFwKG5vcm1hbGl6ZUV4cHJlc3Npb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplSGFzaChpbnB1dDogT3B0aW9uPEhhc2g+KTogT3B0aW9uPE5vcm1hbGl6ZWRIYXNoPiB7XG4gIGlmIChpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBtYXBPYmplY3QoaW5wdXQsIG5vcm1hbGl6ZUV4cHJlc3Npb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplQ2FsbEV4cHJlc3Npb24oZXhwcjogQnVpbGRlckNhbGxFeHByZXNzaW9uKTogTm9ybWFsaXplZENhbGxFeHByZXNzaW9uIHtcbiAgc3dpdGNoIChleHByLmxlbmd0aCkge1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IEV4cHJlc3Npb25LaW5kLkNhbGwsXG4gICAgICAgIGhlYWQ6IG5vcm1hbGl6ZUNhbGxIZWFkKGV4cHJbMF0pLFxuICAgICAgICBwYXJhbXM6IG51bGwsXG4gICAgICAgIGhhc2g6IG51bGwsXG4gICAgICB9O1xuICAgIGNhc2UgMjoge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZXhwclsxXSkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlOiBFeHByZXNzaW9uS2luZC5DYWxsLFxuICAgICAgICAgIGhlYWQ6IG5vcm1hbGl6ZUNhbGxIZWFkKGV4cHJbMF0pLFxuICAgICAgICAgIHBhcmFtczogbm9ybWFsaXplUGFyYW1zKGV4cHJbMV0pLFxuICAgICAgICAgIGhhc2g6IG51bGwsXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6IEV4cHJlc3Npb25LaW5kLkNhbGwsXG4gICAgICAgICAgaGVhZDogbm9ybWFsaXplQ2FsbEhlYWQoZXhwclswXSksXG4gICAgICAgICAgcGFyYW1zOiBudWxsLFxuICAgICAgICAgIGhhc2g6IG5vcm1hbGl6ZUhhc2goZXhwclsxXSksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2FzZSAzOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogRXhwcmVzc2lvbktpbmQuQ2FsbCxcbiAgICAgICAgaGVhZDogbm9ybWFsaXplQ2FsbEhlYWQoZXhwclswXSksXG4gICAgICAgIHBhcmFtczogbm9ybWFsaXplUGFyYW1zKGV4cHJbMV0pLFxuICAgICAgICBoYXNoOiBub3JtYWxpemVIYXNoKGV4cHJbMl0pLFxuICAgICAgfTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==